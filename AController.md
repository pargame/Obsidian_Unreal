> **[[APawn]]의 의지를 결정하는 원격 조종사입니다.** [[APawn]]이라는 '몸'에 '정신'을 불어넣는 역할을 하며, 플레이어의 입력이든 AI의 논리든, 그 의지에 따라 [[APawn]]을 움직이게 합니다. 몸과 정신이 분리되어 있기에, 같은 [[APawn]]이라도 플레이어가 조종할 수도, AI가 조종할 수도 있습니다.

### **1. 주요 역할 및 책임**
> 컨트롤러는 단순히 [[APawn]]을 움직이는 것을 넘어, [[APawn]]의 상태와 플레이어과의 상호작용 전반을 관리합니다.
* **빙의 (Possession):**
	   특정 [[APawn]]에 대한 제어권을 획득(`Possess`)하거나 내려놓는(`UnPossess`) 핵심 기능을 수행합니다.
* **제어 로직 분리:**
	   [[APawn]]의 시각적 표현이나 물리적 속성과 제어 로직을 분리하여, 하나의 [[APawn]]을 플레이어와 AI가 번갈아 제어하는 등의 유연한 구조를 가능하게 합니다.
* **상태 관리:** 
	   [[APlayerState]]를 통해 플레이어의 점수, 이름 등 영속적인 상태를 관리하고, [[APlayerCameraManager]]를 통해 플레이어의 시점을 제어합니다. (주로 [[APlayerController]]에서)
* **입력 처리:** 
	   플레이어의 입력을 받아 [[APawn]]의 행동으로 변환하거나, AI의 의사결정(예: 비헤이비어 트리)을 실행합니다.
	   
### **2. 핵심 함수 및 속성**
> [[APawn]]을 제어하고 상태를 동기화하기 위한 필수적인 도구들입니다.
* `Possess(APawn* InPawn)`:
	  지정된 [[APawn]]에 빙의하여 제어권을 획득합니다. 이 함수는 서버에서만 호출되어야 합니다.
* `UnPossess()`:
	현재 제어 중인 [[APawn]]으로부터 빙의를 해제합니다.
* `GetPawn()`: 
	현재 컨트롤러가 제어하고 있는 [[APawn]]에 대한 포인터를 반환합니다. 빙의하지 않은 상태라면 `nullptr`를 반환합니다.
* `GetCharacter()`:
	제어 중인 [[APawn]]이 [[ACharacter]]일 경우, 캐스팅된 포인터를 편리하게 반환합니다.
* `OnPossess(APawn* InPawn)`:
	`Possess` 함수가 성공적으로 실행된 직후 호출되는 [Event|이벤트] 함수입니다. 빙의 시점에 필요한 초기화 로직을 여기에 작성합니다.
* `OnUnPossess(APawn* InPawn)`:
	`UnPossess` 함수가 실행된 직후 호출되는 [Event|이벤트] 함수입니다.
* `PlayerState`:
	컨트롤러에 연결된 [[APlayerState]]에 대한 참조입니다. 서버에서 클라이언트로 복제되어 모든 클라이언트가 다른 플레이어의 상태를 알 수 있게 합니다.
* `SetControlRotation(const FRotator& NewRotation)`:
	컨트롤러의 시점, 즉 카메라가 바라보는 방향을 설정합니다. 이 회전 값은 [[APawn]]의 회전과 독립적일 수 있습니다.

### **3. 주요 서브클래스**
> 컨트롤러는 그 목적에 따라 두 가지 주요 형태로 나뉩니다.
* **[[APlayerController]]**:
	인간 플레이어를 위해 존재합니다. 키보드, 마우스, 게임패드 등의 입력을 받아 처리하고, HUD나 메뉴 같은 UI를 화면에 표시하는 역할을 담당합니다.
* **[[AAIController]]**: 인공지능(AI) 캐릭터를 위해 존재합니다. 비헤이비어 트리, EQS(Environment Query System) 등을 사용하여 주변 환경을 인식하고 자율적으로 판단하여 [[APawn]]을 제어합니다.